name: Sync to Hugging Face Hub
on:
  push:
    branches: [master]

jobs:
  sync-to-hub:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
          lfs: true
      
      # --- NEW DEBUG STEP ---
      - name: Debug Secret Availability
        env:
          TEST_TOKEN: ${{ secrets.HF_TOKEN }}
        run: |
          if [ -z "$TEST_TOKEN" ]; then
            echo "ðŸ”´ ERROR: HF_TOKEN is EMPTY. GitHub cannot read your secret."
            echo "Please check that it is in 'Repository Secrets' and spelled correctly."
            exit 1
          else
            echo "ðŸŸ¢ SUCCESS: HF_TOKEN was found! (Length: ${#TEST_TOKEN} characters)"
          fi

      - name: Push to hub
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
        run: git push --force https://cassianogatto:$SCANR452GIT2HF@huggingface.co/spaces/cassianogatto/SCAN_R_4.5.2 master:main
